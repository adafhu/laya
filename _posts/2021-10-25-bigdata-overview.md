---
layout:     post
title:      "BigData Overview"
subtitle:   "大数据体系综述"
date:       2021-10-25 10:35:27
author:     "kgzhang"
catalog: false
category: 
header-style: text
tags:
  - bigData 
---

## 大数据当前阶段已"降温"

大数据始于 90 年代, 发展初期有很多开源和自研系统. 近几年, 大数据领域已经没有新的 "明星开源引擎", 大数据领域开始逐步收敛, 进入技术普惠和业务大规模应用阶段.

## 01 当下的大数据体系的热点

大数据体系当下的 4 个热点:
- "Shared-Everything" 架构演进;
- 湖仓技术的一体化融合
- 云原生带来的基础设计升级
- 更好地 AI 支持

### 1.1 系统架构角度, 平台整体向 Shared-Everything 架构演进

什么是 Shared-Nothing (也成 MPP) ?

什么是 Shared-Data ?

什么是 Shared-Everyting ?

### 1.2 数据管理角度, 数据湖与数据仓库融合, 形成湖仓一体

什么是数据湖?

什么是数据仓库?

### 云架构角度, 云原生与托管化成为主流

原因: 中小企业不再自研或自建数据平台, 而是使用云上的大数据产品.

### 计算角度, AI 逐渐成为主流, 形成 BI + AI 双模式

BI 作为统计分析类计算, 主要是面向过去的总结; AI 类计算则具备越来越好的预测未来的能力.

AI 已经是大数据领域的一等公民.

## 02 大数据体系的领域架构

### 2.2 分布式调度, 基于云原生, 向统一框架和算法多元化发展

计算资源管理是分布式计算的核心能力, 本质是解决不同种类的负载与资源最优匹配的问题.

Yarn 依旧是这个领域的关键产品, K8S 在大数据计算领域还不够成熟.


常见的集群调度架构:
- 中心化调度架构: 单一的调度器负责将任务指派给集群内的机器. 特别是中心调度器中, 大多数系统采用两级调度框架通过资源调度和作业调度分开的方式, 允许特定的应用来定做不同的业务调度逻辑, 并同时保留了作业之间共享集群资源的特性.

发展趋势:
- K8S 统一调度框架: Google Borg 很早就证明了统一的资源管理有利于最优匹配和削峰填谷.大数据调度器(如 KubeBatch ) 是目前投资的热点.
- 调度算法多元化和智能化: AI 优化是关键方向.
- 面向异构硬件的调度支持: K8S插件式设计有明显优势.

### 2.3 元数据服务统一化

第一代元数据系统

HIVE 的元数据是托管在 MySQL 等关系数据库引擎上.

第二代元数据系统

Apache IceBerg. 

### 2.4 多种计算引擎并存

主流计算模式:
- 批处理
- 流处理
- 交互式
- 机器学习

批处理的发展

第一代是 Hive+Tez.

第二代是 Spark.

交互式分析

Apache Impala, Clickhouse, Apache Presto

流处理

主打的是实时大屏, 监控报警以及最近流行的实时机器学习.

机器学习

Python 作为标准语言开始流行, Python 有取代 Java 成为命令式编程类大数据开发的潜力.

声明式编程类一直是 SQL

未来趋势:
- 近实时化成为主流
- IoT 领域兴起, 计算形态可能会从云中心演化到云边端一体
- 大数据平台/引擎整体云原生化
- 机器学习技术会充分融入大数据系统(甚至任何系统)的设计

### 2.5 框架与接入层

越来越多的企业的大数据会使用 "托管" 与 "云原生", 在此基础上需要:
- 监控/运维能力, 审计日志, 计量计费, 对计算系统热切换的控制
- 接入层: 统一认证协议/服务(kerberos)

### 2.6 数据开发与治理平台

- 数据集成: 支持关系型数据库、大型数仓、NoSQL 数据库、非结构化数据、消息队 列等数据源之间的数据同步，包含批量数据同步、实时数据同步、整库数据迁移等， 解决云上、跨云、跨地域以及本地 IDC 机房等复杂网络环境之间的数据同步问题。
- 元数据服务:支持不同数据源的元数据发现与元数据归集，并构建数据目录和数据血 缘服务，同时为上层数据开发与数据治理提供元数据服务。
- 数据开发:提供在线数据开发 IDE，支持多种计算存储引擎，提供批计算、实时计算、 交互式分析、以及机器学习等一体化数据开发服务，为各种技术/非技术人员提供高 效极致的 ETL/ELT 研发体验。
- 调度系统:支持大规模、高并发、高稳定性的细粒度周期性任务调度，支持流处理、 批处理与 AI 一体化数据任务编排，保障数据生产的时效性、稳定性。
- 数据治理:提供数据资产管理、数据质量控制、数据安全管理、监控告警、数据标准、 成本优化等服务，保障数据仓库能够规范、健康、合规和可持续发展。
- 数据服务:提供快速将数据表生成数据 API 服务的能力，连接数据仓库与数据应用的 “最后一公里”，实现灵活可控的数据共享交换服务。

未来趋势:
- 低代码开发与分析: 因为数据的获取越来越方便, 所以通过低代码化开发与工具, 实现 "人人都是分析师".
- 智能编程: 传统的 ETL 开发存在大量重复或相似的编码工作, 未来可能会得到 AI 辅助.
- 开发即治理: 过去是先开发后治理 (即设计时不考虑数据的管理), 最终让数据治理成为负担.

### 2.7 智能化

随着大数据平台及其所承载业务的发展，我们也面临着新的挑战:

- 10PB 到 EB 级数据和百万级别作业规模，已经成为主流，海量数据和作业靠人很难管 理和。传统的 DBA 模式或数据中台团队不再胜任。
- 多种数据融在一起，人无法在海量规模上理解数据的所有价值。
- 大数据系统经过多年发展，如果需要实现“跃迁”式的进步，需要体系结构层面的改 造。

因此 AI for System 的概念兴起，基于 AI 的能力做系统的优化，在数仓领域我们可以 称之为自动数仓(Auto Data Warehouse)。数据湖领域也可以有更多的自动化，但因为 数仓方向的数据管理/调优能力发展更早，这个领域更领先。

自动数仓能力分级:
- L1 级:运维能力白屏化和工具化。目前绝大多数系统都可以做到这个层次。
- L2 级:更好的系统托管化，底层系统对用户透明。例如小文件 Merge 自动化、软硬 件升级透明、自动 loadbalance 等。很多全托管系统都可以做到这个层次(例如 Snowflake、MaxCompute)。
- L3 级:中台能力的自动化，辅助数据关联与理解，建模与调优。包括数据血缘，相 似度，冗余度，使用情况与自动评分。辅助标签系统，辅助中台建设。市面上的很多 数据中台产品聚焦在这一层。
- L4 级:系统具备自学习能力。基于历史信息的性能调优(自动 Parallelism，自动冷 热数据分层等等)，资源与优先级的动态调配，自适应的监控和报警能力，自动数据 异常识别。目前大多数系统的能力边界在此，有巨大的发挥空间。
- L5 级:自动化建模。包含更高阶的数据理解，能够自动发现数据的内在关联与冗余 度，根据数据访问情况，自动维护数仓体系。

### 2.8 安全与隐私保护

安全的三个层次:

1. 最基础的层次是数据中心的物理安全与网络安全，数据中心是构建大数据中台的基础， 数据中心自身安全性和网络接入安全性直接影响到企业大数据中台的可用性。主要包 括数据中心保障设施、数据中心安全管控、数据中心的网络安全等几个维度的建设。 当云架构成为主流，物理安全方面通常由云厂商承担。
2. 在这之上是企业大数据平台的系统安全，由大数据平台内部的多个安全子系统构成， 如访问控制、应用程序隔离、平台可信、风控和审计等子系统。这些子系统共同保障 大数据平台的完整性。
3. 最上层是数据应用安全，贴近于用户的应用场景。通过在这一层提供丰富多样的数据 安全产品，大数据中台为用户应用数据的各类业务场景提供切实可靠的数据安全能力。

### 2.9 运维

运维分为 3 层:
- 运维 IaaS 层: 基础设施的运维层, 为上层的运维平台及业务提供管控能力;
- 运维 PaaS 层: 面向运维领域功能的服务层, 如: 流程编排, 作业调度, 配置管理, 运维分析服务, 审批/通知, 脚本/命令通道服务等.
- 运维 SaaS 层: 面对具体的大数据业务定制化智能运维.

未来趋势:
- 产品化: 本质上是让各类运维动作更标准, 更可控;
- 数据化: 产品产生的数据要分析. 数据的收集存储, 计算处理, 运维数仓建设, 数据分层, 实时性等
- 智能化: 人工智能辅助运维.

## 03 大数据体系未来演进的 4 大技术趋势

### 3.1 近实时架构兴起

在离线 batch 计算和纯流式实时计算之间，以开源 Apache Delta/Hudi 为代表的近实 时架构成为热点。近实时架构避免了流计算庞大的状态存储与管理，在成本和延迟上找到 了另一个平衡.

### 3.2 数据共享与隐私保护成为热点

数据成为资产，开始具备可变现和可交易的能力。可保护隐私的数据交换/共享能力成 为强劲的需求。基于 Differential Privacy 的数据编码交易，以及基于 Federated Learning 的多方面安全计算是该领域的热点技术。

### 3.3 IoT 成为热点

目前人的行为数据(日志)是大数据计算的主要来源，超过 80%的数据都来源于行为 日志(例如浏览、点击)。随 5G+智能化设备的兴起，设备日志会成为更大的数据源增长 点，面向海量低价值设备数据的处理和优化，需要得到更多的关注。

### 3.4 AI for System

AI for System，即上文中提到的大数据自动驾驶。AI 作为工具，成为优化的常用手段。 在大数据领域，随数据量/系统复杂度的增长，DBA 模式已经不再试用。利用算法优化系统 成为主流方向，大数据的“自动驾驶”会越来越自动。

> 车辆都能自动驾驶, 更何况是大数据.

## 04 大数据体系内待探索的 3 个疑问

疑问1: 4 个核心计算模式是否会进一步收敛, 收敛的终态是什么样子?

疑问2: 关系模型外, 是否会发展出其他的主流计算范式?

疑问3: 开源自建与直接选购企业级产品, 谁能更获得用户认可?

